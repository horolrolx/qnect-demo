<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Qnect 주문 완료</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <h1>주문 완료</h1>
    </header>
    
    <main class="order-confirmation">
        <div class="success-icon">✓</div>
        <h2>주문이 성공적으로 접수되었습니다!</h2>
        
        <div class="order-details">
            <p>테이블 번호: <span id="order-table"></span></p>
            <p>주문 시간: <span id="order-time"></span></p>
            <p>주문 번호: <span id="order-id"></span></p>
        </div>
        
        <div id="ordered-items">
            <!-- 주문 항목들 -->
        </div>
        
        <div class="order-total">
            <p>총 금액: <span id="order-total"></span></p>
        </div>
        
        <button onclick="location.href='index.html'" class="primary-btn">메뉴로 돌아가기</button>
    </main>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            displayOrderConfirmation();
        });
        
        function displayOrderConfirmation() {
            const orderData = JSON.parse(localStorage.getItem('currentOrder'));
            
            if (!orderData) {
                window.location.href = 'index.html';
                return;
            }
            
            // 주문 정보 표시
            document.getElementById('order-table').textContent = orderData.tableNumber;
            document.getElementById('order-time').textContent = new Date(orderData.orderTime).toLocaleString();
            document.getElementById('order-id').textContent = generateOrderId();
            document.getElementById('order-total').textContent = orderData.totalAmount.toLocaleString() + '원';
            
            // 주문 항목 표시
            const itemsContainer = document.getElementById('ordered-items');
            let html = '<h3>주문 항목</h3><ul>';
            
            orderData.items.forEach(item => {
                html += `<li>${item.name} x ${item.quantity} = ${(item.price * item.quantity).toLocaleString()}원</li>`;
            });
            
            html += '</ul>';
            itemsContainer.innerHTML = html;
            
            // 장바구니 비우기
            localStorage.removeItem('cart');
            
            // 구글 시트에 주문 데이터 전송 (선택사항)
            // sendOrderToGoogleSheet(orderData);
        }
        
        function generateOrderId() {
            return Math.floor(100000 + Math.random() * 900000);
        }
    </script>
</body>
</html>